---
name: User Profiles & Connections
status: open
created: 2026-02-01T19:27:06Z
updated: 2026-02-01T19:36:29Z
github: https://github.com/Enoshraju7-prog/bits-campus-connect/issues/8
depends_on: [2, 4, 6]
parallel: true
conflicts_with: []
---

# Task: User Profiles & Connections

## Description
Build user profile management (view, edit, photo upload) and the social connections system (request, accept, reject, remove). Includes user discovery with search/filter by campus and interests, suggested connections, and both backend APIs and frontend profile/discovery pages.

## Acceptance Criteria
- [ ] GET /api/v1/users/me - returns authenticated user's full profile with interests
- [ ] PUT /api/v1/users/me - updates name, bio, batch_year, current_focus
- [ ] GET /api/v1/users/:username - returns public profile with connection status
- [ ] GET /api/v1/users/search?q=&campus=&interest= - search/filter users with pagination
- [ ] POST /api/v1/users/me/photo - upload profile photo via presigned R2 URL
- [ ] POST /api/v1/users/me/cover - upload cover photo via presigned R2 URL
- [ ] PUT /api/v1/users/me/interests - update user interests (max 10)
- [ ] POST /api/v1/connections/request - send connection request
- [ ] GET /api/v1/connections/pending - list pending requests (sent and received)
- [ ] POST /api/v1/connections/:id/accept - accept request
- [ ] POST /api/v1/connections/:id/reject - reject request
- [ ] DELETE /api/v1/connections/:id - remove connection
- [ ] GET /api/v1/connections - list all accepted connections with pagination
- [ ] GET /api/v1/connections/suggestions - suggested users based on campus, interests, mutual connections
- [ ] Frontend: Profile page (own), profile page (others), edit profile form, discovery/search page, connections list, pending requests page
- [ ] Onboarding flow: name, bio, interests selection, profile photo after first login

## Technical Details
- R2 upload flow: backend generates presigned PUT URL -> frontend uploads directly to R2 -> frontend confirms with media URL
- Image validation: JPG/PNG only, max 5MB, generate thumbnail URLs via R2 image transforms
- Search uses PostgreSQL ILIKE for name/username, filtered by campus enum and interest joins
- Suggested connections: weighted score from same campus (3x), shared interests (2x per match), mutual connections (1x per mutual)
- Connection status check on profile view (none/pending/connected)
- Interests loaded from seeded interests table with category grouping

## Dependencies
- [ ] Task 003: Authentication system (JWT middleware, user creation)
- [ ] Cloudflare R2 bucket configured with CORS for presigned uploads

## Effort Estimate
- Size: L
- Hours: 16-20
- Parallel: true (can run alongside Tasks 5, 6, 7 after Task 3)

## Definition of Done
- [ ] Profile view and edit works end-to-end
- [ ] Photo upload to R2 works with presigned URLs
- [ ] Connection request/accept/reject/remove flow works
- [ ] Search and discovery returns filtered, paginated results
- [ ] Suggested connections algorithm returns relevant users
- [ ] Onboarding flow captures profile data on first login
