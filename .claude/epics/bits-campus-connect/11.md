---
name: Testing, Security & Deployment
status: open
created: 2026-02-01T19:27:06Z
updated: 2026-02-01T19:36:29Z
github: https://github.com/Enoshraju7-prog/bits-campus-connect/issues/11
depends_on: [001, 002, 003, 004, 005, 006, 007, 008, 009]
parallel: false
conflicts_with: []
---

# Task: Testing, Security & Deployment

## Description
Final task covering comprehensive testing (API integration tests, E2E for critical flows), security hardening (OWASP top 10 mitigations), and production deployment configuration for Vercel (frontend) and Railway (backend + PostgreSQL + Redis). Includes CI/CD pipeline, monitoring setup, and final QA.

## Acceptance Criteria
- [ ] API integration tests for all critical endpoints: auth (register, login, verify, refresh), users (CRUD, search), connections (request, accept, reject), messages (send, list), stories (create, view), feed (create, like, comment), communities (create, join, post, vote)
- [ ] E2E tests for critical user flows: registration -> verification -> login, send message -> receive in real-time, create post -> like -> comment
- [ ] Test coverage > 70% for apps/api/src/services/
- [ ] Security: Helmet.js configured with strict CSP headers
- [ ] Security: CORS configured for frontend origin only
- [ ] Security: Input sanitization on all user-generated content (DOMPurify or similar)
- [ ] Security: SQL injection prevention verified (Prisma parameterized queries)
- [ ] Security: XSS prevention verified (React escaping + sanitization)
- [ ] Security: CSRF token on state-changing requests
- [ ] Security: File upload validation (type whitelist, size limits, no executable content)
- [ ] Security: Rate limiting tuned per endpoint category
- [ ] Vercel deployment: apps/web with environment variables, custom domain ready
- [ ] Railway deployment: apps/api with PostgreSQL and Redis addons, environment variables
- [ ] GitHub Actions CI: lint, test, build on PR; deploy on merge to main
- [ ] Sentry integration for error tracking (frontend + backend)
- [ ] Health check endpoint: GET /api/v1/health (DB + Redis connectivity)
- [ ] Production environment variables documented and configured
- [ ] Database backup strategy configured on Railway

## Technical Details
- Testing framework: Jest (backend) + React Testing Library (frontend) + Playwright (E2E)
- Jest config in apps/api with ts-jest, test database via Docker or Railway test instance
- Playwright tests in apps/web/e2e/ targeting staging URL
- Helmet config: strict CSP allowing only known CDN sources, disable X-Powered-By
- CORS: origin whitelist from ALLOWED_ORIGINS env var
- GitHub Actions workflows: .github/workflows/ci.yml (PR checks) and .github/workflows/deploy.yml (production deploy)
- Vercel config: vercel.json with build settings, env vars via Vercel dashboard
- Railway config: Procfile or railway.toml, auto-deploy from main branch
- Sentry: @sentry/node for backend, @sentry/nextjs for frontend
- Health check: test DB query (SELECT 1) + Redis PING

## Dependencies
- [ ] All previous tasks (001-009) must be substantially complete
- [ ] Vercel account configured
- [ ] Railway account with PostgreSQL and Redis provisioned
- [ ] Sentry project created
- [ ] Custom domain (optional)

## Effort Estimate
- Size: L
- Hours: 20-24
- Parallel: false (final task, needs all features complete)

## Definition of Done
- [ ] All integration tests pass in CI
- [ ] E2E tests pass for critical flows
- [ ] Security audit checklist passes (no critical/high vulnerabilities)
- [ ] Frontend deployed and accessible on Vercel
- [ ] Backend deployed and responding on Railway
- [ ] WebSocket connections work in production
- [ ] Sentry capturing errors correctly
- [ ] CI/CD pipeline runs on every PR and deploys on merge
- [ ] Health check endpoint returns 200
