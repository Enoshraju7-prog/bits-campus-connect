---
name: Communities
status: open
created: 2026-02-01T19:27:06Z
updated: 2026-02-01T19:36:29Z
github: https://github.com/Enoshraju7-prog/bits-campus-connect/issues/5
depends_on: [2, 4, 6]
parallel: true
conflicts_with: []
---

# Task: Communities

## Description
Build the Reddit-style community system with community CRUD, membership management, posts with upvote/downvote voting, threaded comments (3 levels), post sorting algorithms, and content moderation tools. Includes community discovery, search, and all associated UI.

## Acceptance Criteria
- [ ] GET /api/v1/communities - browse communities with search and pagination
- [ ] POST /api/v1/communities - create community (name, description, rules, icon)
- [ ] GET /api/v1/communities/:id - community details with membership status
- [ ] PUT /api/v1/communities/:id - update community (admin/moderator only)
- [ ] POST /api/v1/communities/:id/join - join community
- [ ] POST /api/v1/communities/:id/leave - leave community
- [ ] GET /api/v1/communities/:id/members - paginated member list with roles
- [ ] GET /api/v1/communities/:id/posts?sort=hot|new|top&period=day|week|month|all - community posts with sorting
- [ ] POST /api/v1/communities/:id/posts - create post (text, image, link)
- [ ] GET /api/v1/posts/:id - post detail with vote status
- [ ] PUT /api/v1/posts/:id - edit own post
- [ ] DELETE /api/v1/posts/:id - delete post (author or moderator)
- [ ] POST /api/v1/posts/:id/vote - upvote/downvote (toggle, change, or remove)
- [ ] GET /api/v1/posts/:id/comments - threaded comments (3 levels deep)
- [ ] POST /api/v1/posts/:id/comments - create comment
- [ ] PUT /api/v1/comments/:id - edit own comment
- [ ] DELETE /api/v1/comments/:id - delete comment (author or moderator)
- [ ] POST /api/v1/comments/:id/vote - vote on comment
- [ ] POST /api/v1/reports - report content (user, post, comment, community)
- [ ] Moderator tools: remove post, remove comment, ban user from community
- [ ] Frontend: Community list/grid, community page with post feed, post detail with comments, create community form, create post form, vote buttons, comment thread UI, moderator actions

## Technical Details
- Hot sort algorithm: score = (upvotes - downvotes) / (hours_since_post + 2)^1.5
- Top sort: filter by period, order by (upvotes - downvotes) DESC
- New sort: ORDER BY created_at DESC
- Vote toggle: check existing vote -> if same type remove, if different type switch, if none create
- Update upvotes/downvotes counters on post/comment via application logic
- Threaded comments: parent_id references, query top-level (parent_id IS NULL), then children up to depth 3
- Community roles: admin (creator), moderator (appointed by admin), member
- Member count: maintained as denormalized counter on communities table
- Report system: creates report record, moderators/admins can view in community settings
- Community name: unique, 3-50 chars, validated server-side

## Dependencies
- [ ] Task 003: Authentication (all endpoints require auth)
- [ ] Task 002: Database (communities, posts, comments, votes tables)

## Effort Estimate
- Size: XL
- Hours: 24-32
- Parallel: true (can run alongside Tasks 4, 5, 6)

## Definition of Done
- [ ] Community CRUD and membership works
- [ ] Posts with voting system works correctly (up/down/toggle)
- [ ] Threaded comments display correctly to 3 levels
- [ ] Post sorting (hot/new/top) returns correct order
- [ ] Moderator tools function correctly
- [ ] Report system captures reports
- [ ] Community discovery/search works
