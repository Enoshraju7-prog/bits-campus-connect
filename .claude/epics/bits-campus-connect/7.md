---
name: Notifications & Settings
status: open
created: 2026-02-01T19:27:06Z
updated: 2026-02-01T19:36:29Z
github: https://github.com/Enoshraju7-prog/bits-campus-connect/issues/7
depends_on: [001, 002, 003, 005]
parallel: true
conflicts_with: [005]
---

# Task: Notifications & Settings

## Description
Build the in-app notification system with real-time delivery via Socket.io, notification center UI, user preference management, privacy settings, block/unblock functionality, and account management (deactivation/deletion). Leverages the Socket.io infrastructure from the messaging task.

## Acceptance Criteria
- [ ] Notification creation service: generates notifications for all event types (connection_request, connection_accepted, new_message, group_added, post_like, post_comment, comment_reply, story_reaction, community_post, post_upvote, welcome, system_announcement)
- [ ] Real-time delivery: notifications pushed via Socket.io to user:{id} room
- [ ] GET /api/v1/notifications - paginated notification list with unread count
- [ ] PUT /api/v1/notifications/:id/read - mark single notification as read
- [ ] PUT /api/v1/notifications/read-all - mark all as read
- [ ] DELETE /api/v1/notifications/:id - delete notification
- [ ] GET /api/v1/notifications/settings - get notification preferences per type
- [ ] PUT /api/v1/notifications/settings - update preferences (enable/disable per type)
- [ ] GET /api/v1/settings - get user privacy settings
- [ ] PUT /api/v1/settings - update settings (who can message: everyone/connections, profile visibility: public/private)
- [ ] POST /api/v1/users/:id/block - block user (prevents messaging, hides content)
- [ ] DELETE /api/v1/users/:id/block - unblock user
- [ ] GET /api/v1/users/blocked - list blocked users
- [ ] POST /api/v1/account/deactivate - temporary account deactivation
- [ ] DELETE /api/v1/account - permanent account deletion with data cleanup
- [ ] GET /api/v1/account/data - export user data as JSON (GDPR compliance)
- [ ] Frontend: Notification center (bell icon with badge), notification list page, settings page with toggles, privacy settings, blocked users list, account management section
- [ ] Block enforcement: blocked users excluded from search, messaging, feed, story views

## Technical Details
- Notification service: centralized NotificationService.create(type, userId, data) that saves to DB and emits Socket.io event
- Socket.io room: user:{userId} - each user joins their personal room on connect
- Unread badge: count of notifications where is_read = false, cached in Redis with invalidation on new/read
- Notification preferences: stored as JSON in a user_settings table or as columns on users table
- Block enforcement: middleware/service layer checks blocks table before allowing message send, connection request, or content visibility
- Account deletion: cascade delete all user content, anonymize messages (sender shows "Deleted User"), remove from all conversations/communities
- Data export: aggregate all user data (profile, posts, messages, connections) into JSON download

## Dependencies
- [ ] Task 005: Socket.io server setup (shares WebSocket infrastructure)
- [ ] Task 003: Authentication

## Effort Estimate
- Size: L
- Hours: 16-20
- Parallel: true (after Socket.io is set up in Task 5)

## Definition of Done
- [ ] Notifications generated for all event types
- [ ] Real-time notification delivery works via Socket.io
- [ ] Notification preferences respected (disabled types not sent)
- [ ] Block functionality prevents all interaction between blocked users
- [ ] Privacy settings control message and profile visibility
- [ ] Account deletion removes/anonymizes all user data
- [ ] Settings UI is functional with proper toggles
